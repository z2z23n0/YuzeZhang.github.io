---
layout:     post
title:      "C语言操作符总结"
subtitle:   ""
date:       2019-07-11
author:     "Zeno"
header-img: "img/post-bg-C1.jpg"
tags:
    - C语言
---
[TOC]

### 在C语言中，操作符主要分为以下几类:
|分类|操作符|
|:-:|:-:|
|算术操作符|\+、\-、\*、\\、%|
|移位操作符|<<、>>|
|位操作符|&、\|、^、~|
|赋值操作符|=|
|单目操作符|!、-、+、--、++、~、*、(类型)、&、sizeof|
|关系操作符|\>、<、==、>=、<=、!=|
|逻辑操作符|&&、\|\||
|条件操作符|表达式1?表达式1:表达式2|
|逗号表达式|表达式1,表达式2,表达式3,......表达式n|
|下标引用、函数调用和结构成员|[ ]、( )、. 、->|

### 1.算术操作符
\+、-、*、\\即加、减、乘、除

- 算术操作符具有优先级，和数学上类似
- 对于除法来说，整数除以整数结果还是整数(结果小数部分直接舍弃，并不是四舍五入)
```c
double ret = 9 / 10;
输出：ret = 0.000000
```
在这里，9和10都是int类型的常量，9和10进行除法运算后得到的结果是0，然后再通过隐式类型转换将0 转换为double类型再赋给ret
此处如果写成`double ret = 9.0/10.0`即可得到正确的结果
注:9.0是double类型的常量，9.0f是float类型的常量

- 如果算术运算符的两个操作数不同的时候，就会触发隐式类型转换，转成相同类型
```c
double ret = 9.0/10;
输出：ret = 0.900000
```
- 0不能作为除数，如果是一个常量0，编译器就能检查到并给出提示，如果是变量0，编译器检查不到，就会在运行时出错
- 不能对0求模( % )，效果和除以( \ )0是一样的
- 求模( % )只能针对整数(char、short、int、long、longlong)
- C语言中不支持用"+"拼接字符串
### 2.移位操作符
移位操作是一种针对二进制的操作
移位分为左移( << )和右移( >> )
左移的规则:抛弃最高位，所有位整体向左移动一个位置，最右侧补零
右移的规则:
- 逻辑右移：在最左侧补零
- 算术右移：最左侧补符号位

- 每次左移1位，相当于乘2
- 每次右移1位，相当于除2
- 移位操作移动了负数位或者移动位数过大是未定义行为

### 3.位操作符
(1)按位与( & )
如果两个数字都为1，结果为1，否则为0
(2)按位或( | )
如果两个数字都为0，结果为0，否则为1
(3)按位取反( ~ )
针对这个数字，0变成1，1变成0
(4)按位异或( ^ )
如果两个数相同，结果为0，相异结果为1

### 4.赋值操作符

- 赋值操作符可以复合使用，如:+=、-=、*=、\\=、%=、>>=、<<=、&=、|=、^=
- C语言可以连续赋值`int x=y=10`，但尽量不要这么做，影响代码可读性

### 5.单目操作符
(1)逻辑反操作( ! )
值为0得1，值为1得0，为真得假，为假得真(C语言中非0即为真)
(2)正负值(+、-)
(3)取地址符( & )
(4)按位取反( ~ )
(5)间接访问操作符( * )
(6)强制类型转换( (类型) )
这种强制类型转换是一个非常危险的动作，实际代码中不推荐使用强制类型转换
(7)返回对象或类型所占内存字节数(sizeof)
sizeof是运算符而不是函数
```c
int a[4] = {9,5,2,7};
printf("%d\n",sizeof(arr[100]));
```
这个代码不是未定义行为，sizeof在编译时就求值了，而未定义行为都是在运行时发生
(8)自增和自减( ++ 、--)
在C语言中，自增或自减都有两种形式，即n++、++n、n--、--n
如果不去考察这两个表达式的返回值的话，++n和n++是等价的，如果取返回值，++n返回的是自增之后的值，n++返回的是自增之前的值
如果把++这样的操作想象成函数
```c
\\++n
n+=1;
return n;
```
```c
\\n++
int temp = n;
n+=1;
return temp;
```
后置自增创建了一个temp，于是需要更多的时间和内存，所以在c\c++中推荐使用前置自增(++n)
而在python中没有++这样的操作，只有n+=1
Go中没有前置++,只有后置++，但是后置++不能取返回值

### 6.关系操作符
关系操作符的返回值只有0和1
```c
int n=100;
3<n<20 //这个表达式的值是1，因为3<n为真，返回值为1，1再与20比较结果为真，返回1
```

### 7.逻辑操作符
(1)逻辑与( && )
如果两个操作数都是真，结果为真，否则为假
(2)逻辑或(||)
如果两个操作数都是假，结果为假，否则为真

在c++、python、java、c语言中，逻辑与和逻辑或表达式都遵循“短路求值”的规定
对于逻辑与(&&)来说，如果左侧表达式值为假，那么右侧表达式不执行
对于逻辑或(||)来说，如果左侧表达式值为真，那么右侧表达式不执行
```c
int i=0,a=0,b=2,c=3,d=4;
i = a++ && ++b && c++ && d++;
输出：i=0,a=1,b=2,c=3,d=4
```
```c
int i=0,i=0,b=2,c=3,d=4;
i = a++ || ++b || c++ || d++;
输出：i=1,a=1,b=3,c=3,d=4;
```

### 8.条件操作符
C语言中唯一一个三目运算符
表达式1?表达式2:表达式3
表达式1表示判定条件，相当于if括号中的内容
如果表达式1值为真，执行表达式2
如果表达式1值为假，执行表达式3

### 9.逗号表达式
整个表达式的值是最后一个逗号之后的值
逗号运算符是所有运算符中级别最低的
关于逗号表达式的具体细节可以看[这篇](https://www.cnblogs.com/hnrainll/archive/2011/08/03/2126660.html)

### 10.下标引用、函数调用和结构成员
(1)数组下标引用操作符( [ ] )
下标引用操作符具有两个操作数，一个数组名，一个下标值
arr[4]相当于*(arr+4)相当于4[arr]
(2)函数调用操作符( ( ) )
函数调用操作符能接受一个或多个操作数，第一个操作数为函数名，其余操作数是传递给函数的参数
(3)结构成员操作符( .和-> )
.的用法：结构体.成员名
->的用法：结构体指针->成员名

